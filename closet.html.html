<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Website B — Closet Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    font-family: Arial, sans-serif;
    background: #fafafa;
    padding: 20px;
  }
  .card {
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-width: 700px;
    margin: auto;
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    margin: 6px 0 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    padding: 10px 16px;
    background: #007bff;
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
  }
  table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
  }
  th, td {
    padding: 10px;
    border-bottom: 1px solid #ccc;
  }
</style>
</head>

<body>
<div class="card">
  <h1>Closet Database — Admin Editor</h1>

  <h2>Add / Edit Item</h2>

  <label>Item Code</label>
  <input id="code" placeholder="H001">

  <label>Name</label>
  <input id="name" placeholder="Black Cropped Hoodie">

  <label>Category</label>
  <input id="category" placeholder="Hoodie / Dress / Jeans">

  <label>Size</label>
  <input id="size" placeholder="S / M / L / 6">

  <label>Color</label>
  <input id="color" placeholder="Black / Green / Navy">

  <label>Notes</label>
  <textarea id="notes" placeholder="Brand, fit, details..."></textarea>

  <button onclick="saveItem()">Save Item</button>

  <h2>All Items</h2>
  <table>
    <thead>
      <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Category</th>
        <th>Size</th>
        <th>Color</th>
        <th>Edit</th>
      </tr>
    </thead>
    <tbody id="itemTable"></tbody>
  </table>
</div>

<!-- Firebase Libraries -->
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-database-compat.js"></script>

<script>
  // Your Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyAbcM3ThohjTDnoWj25SxMhmM-kdLHbK1A",
    authDomain: "oucloset-ea09e.firebaseapp.com",
    databaseURL: "https://oucloset-ea09e-default-rtdb.firebaseio.com",
    projectId: "oucloset-ea09e",
    storageBucket: "oucloset-ea09e.firebasestorage.app",
    messagingSenderId: "866034776628",
    appId: "1:866034776628:web:ce99929a6e0f2b48d0a861"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Save Item
  function saveItem() {
    const code = document.getElementById("code").value.trim();
    const name = document.getElementById("name").value.trim();
    const category = document.getElementById("category").value.trim();
    const size = document.getElementById("size").value.trim();
    const color = document.getElementById("color").value.trim();
    const notes = document.getElementById("notes").value.trim();

    if (!code) {
      alert("Item needs a code.");
      return;
    }

    firebase.database().ref("items/" + code).set({
      name, category, size, color, notes
    });

    alert("Saved!");
    loadItems();
  }

  // Load Items into Table
  function loadItems() {
    const tbody = document.getElementById("itemTable");
    tbody.innerHTML = "";

    firebase.database().ref("items").on("value", (snapshot) => {
      tbody.innerHTML = "";
      snapshot.forEach((child) => {
        const code = child.key;
        const item = child.val();

        const row = `
          <tr>
            <td>${code}</td>
            <td>${item.name || ""}</td>
            <td>${item.category || ""}</td>
            <td>${item.size || ""}</td>
            <td>${item.color || ""}</td>
            <td><button onclick="editItem('${code}')">Edit</button></td>
          </tr>
        `;

        tbody.innerHTML += row;
      });
    });
  }

  // Edit item (fills form)
  function editItem(code) {
    firebase.database().ref("items/" + code).once("value", (snapshot) => {
      const item = snapshot.val();
      document.getElementById("code").value = code;
      document.getElementById("name").value = item.name || "";
      document.getElementById("category").value = item.category || "";
      document.getElementById("size").value = item.size || "";
      document.getElementById("color").value = item.color || "";
      document.getElementById("notes").value = item.notes || "";
    });
  }

  loadItems();
</script>

</body>
</html>
